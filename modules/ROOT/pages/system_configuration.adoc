= System Configuration
:page-role: admin
:page-toclevels: 3
:description: System-wide configuration options for administrators
:keywords: system configuration, policies, registry, ini, openid, updater

This page documents the *system-wide configuration options* available to administrators.
These settings are enforced globally and are not intended to be modified by end users.

System configuration is evaluated at application startup and overrides user-level settings in most cases.

== Supported Platforms and Locations}

System configuration is read from different locations depending on the operating system.

=== Windows (Registry)

On Windows systems, configuration is read from the system policy registry:

----
HKEY_LOCAL_MACHINE\Software\Policies\{ini_name}\{ini_name}
----

=== macOS (System Preferences)

On macOS, configuration is read from the system-wide preferences file:

----
/Library/Preferences/{ini_rev_domain}/{ini_name}.ini
----

The application must have read access to this directory and file.

=== Linux and Unix-like Systems

On Linux and other Unix-like systems, configuration is read from:

----
/etc/{ini_name}/{ini_name}.ini
----

The application must have read access to this directory and file.

== Configuration File Format

On macOS, Linux, and Unix-like systems, the configuration file uses the INI format.

.Example: `/etc/owncloud/owncloud.ini`
[source,ini]
----
[Setup]
ServerUrl=https://cloud.example.com
AllowServerUrlChange=false
MoveToTrash=true

[Updater]
SkipUpdateCheck=true

[OpenIDConnect]
ClientId=your-client-id
ClientSecret=your-client-secret
Ports=8080,8443
Scopes=openid offline_access email profile
Prompt=select_account consent
----

== Windows Registry Configuration

The same settings can be applied on Windows using registry policies.

.Example: `owncloud.reg`
[source,registry]
----
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\Software\Policies\ownCloud\ownCloud]

[HKEY_LOCAL_MACHINE\Software\Policies\ownCloud\ownCloud\Setup]
"ServerUrl"="https://cloud.example.com"
"AllowServerUrlChange"=dword:00000000
"MoveToTrash"=dword:00000001

[HKEY_LOCAL_MACHINE\Software\Policies\ownCloud\ownCloud\Updater]
"SkipUpdateCheck"=dword:00000001

[HKEY_LOCAL_MACHINE\Software\Policies\ownCloud\ownCloud\OpenIDConnect]
"ClientId"="your-client-id"
"ClientSecret"="your-client-secret"
"Ports"="8080,8443"
"Scopes"="openid offline_access email profile"
"Prompt"="select_account consent"
----

Boolean registry values use `DWORD`:

* `0` = disabled
* `1` = enabled

== Configuration Sections

=== Setup

Controls initial application behavior and server enforcement.

[cols="1,3,1,1", options="header"]
|===
| Key
| Description
| Type
| Default

| `ServerUrl`
| Enforces a predefined server URL. When set, the account setup wizard will pre-fill the server URL..
| String
| empty

| `AllowServerUrlChange`
| Controls whether users may change the server URL. This option only applies if `ServerUrl` is set.
| Boolean
| true

| `MoveToTrash`
| Determines whether deleted files are moved to the trash instead of being permanently removed.
| Boolean
| true
|===

=== Updater

Controls update behavior at a global level.

[cols="1,3,1,1", options="header"]
|===
| Key
| Description
| Type
| Default

| `SkipUpdateCheck`
| Disables automatic update checks when enabled.
| Boolean
| false
|===

=== OpenID Connect

Defines OpenID Connect (OIDC) authentication parameters.
If this section is present, the application uses these values for authentication flows.

All keys need to be defined for the OpenID Connect configuration to be valid.

[cols="1,3,1,1", options="header"]
|===
| Key
| Description
| Type
| Default

| `ClientId`
| OpenID Connect client identifier.
| String
| empty

| `ClientSecret`
| OpenID Connect client secret.
| String
| empty

| `Ports`
| Comma-separated list of local ports used for authentication callbacks.
| List
| empty

| `Scopes`
| Space-separated list of requested OpenID scopes.
| String
| empty

| `Prompt`
| Space-separated list of OpenID prompt parameters (for example `select_account`, `consent`).
| String
| empty
|===

== Operational Notes

* System configuration is read once at application startup.
* Changes require an application restart to take effect.

== Troubleshooting

* Verify file permissions on Unix systems (`/etc/{ini_name}` must be readable).
* On Windows, ensure keys are defined under `HKLM\Software\Policies`.
* Confirm that branding or theme settings do not mask the expected configuration path.

